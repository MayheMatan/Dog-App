<html>

<head>
    <title>Puppy Pals</title>
    <meta name="viewport" content="width = device-width, initial-scale = 1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/css/materialize.min.css">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
        integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
</head>

<body>
    <!-- NAV BAR------------------------------------------------------------- -->
    <nav>
        <div class="nav-wrapper">
            <a id="logo-container" class="brand-logo center">Puppy Pals</a>
            <a data-activates="mobile-demo" class="button-collapse"><i class="material-icons menu">menu</i></a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a class='profile'>My Profile</a></li>
                <li><a class='map'>Map</a></li>
                <li><a class='events'>Events</a></li>
                <li><a class='about'>About</a></li>
                <li><a class='logout'>Logout</a></li>
            </ul>
            <ul id="mobile-demo" class="side-nav">
                <li>
                    <div class="user-view">
                        <a><img class="circle side-picture" src="assets/download.jpg"></a>
                        <a><span class="white-text">USER NAME</span></a>
                    </div>
                </li>
                <li><a class="profile waves-effect ">My Profile</a></li>
                <li><a class="map waves-effect">Map</a></li>
                <li><a class="events waves-effect">Events</a></li>
                <div class="divider"></div>
                <li><a class="about waves-effect">About Us</a></li>
                <li><a class="logout waves-effect">Logout</a></li>
            </ul>
        </div>
    </nav>

    <!--MAIN CONTENT----------------------------------------------------- -->
    <div id='main-container'>
        <!-- HANDLE BARS HERE-------------------------------------------- -->




        <div id="map"></div>
    </div>



    <!-- <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script> -->
    <script src="./jquery/dist/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>
    <script src="main.js"></script>
    <!-- <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDZAMd5ujixxcusvcP1f8SCsSVDcQaZp-o&callback=initMap">
        </script> -->

    <!-- LOGIN PAGE/REGISTRATION ----------------------------------------------------------------------------------------->
    <!-- <div class="container white z-depth-2">
        <ul class="tabs teal">
            <li class="tab col s3"><a class="white-text active" href="#login">login</a></li>
            <li class="tab col s3"><a class="white-text" href="#register">register</a></li>
        </ul>

        <div id="login" class="col s12">
            <form class="col s12">
                <div class="form-container">
                    <h3 class="teal-text">Hello!</h3>
                    <div class="row">
                        <div class="login-input-field col s12">
                            <input id="login-email" type="email" class="validate">
                            <label for="email">Email</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="login-input-field col s12">
                            <input id="login-password" type="password" class="validate">
                            <label for="password">Password</label>
                        </div>
                    </div>
                    <br>
                    <button class="login-btn btn waves-effect waves-light teal" type="submit"
                        name="action">Connect</button>
                </div>
            </form>
        </div>

        <div id="register" class="col s12">
            <form class="col s12">
                <div class="form-container">
                    <h3 class="teal-text">Join Us!</h3>
                    <div class="row">
                        <div class="register-input-field col s6">
                            <input id="register-fist" type="text" class="validate">
                            <label for="last_name">First Name</label>
                        </div>
                        <div class="register-input-field col s6">
                            <input id="register-last" type="text" class="validate">
                            <label for="last">Last Name</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="register-input-field col s12">
                            <input id="register-email" type="email" class="validate">
                            <label for="email">Email</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="register-input-field col s12">
                            <input id="register-password" type="password" class="validate">
                            <label for="password">Password</label>
                        </div>
                    </div>
                    <button class="register-btn btn waves-effect waves-light teal" type="submit"
                        name="action">Submit</button>
                </div>
            </form>
        </div>
    </div> -->

    <!-- PROFILE PAGE-------------------------------------------------------------------------------------------------- -->
    <!-- <script>
    <div class='container'>
        <div class="card-panel grey lighten-4">
            <a><img class="profile-picture circle" src="assets/person.png"/></a>
            <div class='profile-name'>Jane Doe</div>
        </div>
        <div class="profile-container row">
            <div class="col s12 m6 l6">
                <div class="profile-card card">
                    <div class='profile-location'><i class="material-icons">location_on</i>Tel Aviv, Israel</div>
                    <p class='profile-aboutme'>I am a very simple card. I am good at containing small bits of
                        information.
                        I am convenient because I require little markup to use effectively.</p>
                </div>
            </div>
            <div class="col s12 m6 l6">
                <div class="profile-card card">
                    <a><img class="profile-dog-picture circle" src="assets/download.jpg"/></a>
                    <div class='profile-dog-name'>Lucky</div>
                    <div class='profile-dog-text'>
                        <div class='profile-breed'><i class="fas fa-paw"></i>&nbsp&nbsp&nbsp Golden Retriever</div>
                        <div class='profile-weight'><i class="fas fa-weight"></i>&nbsp&nbsp&nbsp 30kg</div>
                        <div class='profile-toy'><i class="fas fa-shapes"></i>&nbsp&nbsp&nbsp Squeaky ball</div>
                        <div class='profile-treat'><i class="fas fa-bone"></i>&nbsp&nbsp&nbsp Milk bone</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="body">
        <div id="chat-circle" class=".chat-icon large btn btn-raised">
            <div id="chat-overlay"></div>
            <i class=".chat-icon material-icons large">chat</i>
        </div>
        <div class="chat-box">
            <div class="chat-box-header">
                Chat
                <span class="chat-box-toggle"><i class="material-icons">close</i></span></div>
            <div class="chat-box-overlay"></div>
            <div class="chat-logs"></div>
            <div class="chat-input">
                <form>
                    <input id="chat-input" type="text" placeholder="Send a message..." />
                    <button id="chat-submit" class="chat-submit" type="submit">
                        <i class="material-icons">send</i>
                    </button>
                </form>
            </div>
        </div>
    </div>
    </script> -->

    <!-- EVENTS PAGE ----------------------------------------------------------------------------------------------------->
    <!-- <div class='container'>
        <ul class="collapsible">
            <li>
                <div class="collapsible-header"><i class="material-icons">filter_drama</i>FIRST EVENT TITLE</div>
                <div class="collapsible-body">
                    <div class="card-action right-align"><a
                            class="event-add btn-floating btn-tiny waves-effect waves-light red"><i
                                class="material-icons">add</i></a></div>
                    <span>Lorem ipsum dolor sit amet.</span>
                </div>
            </li>
            <li>
                <div class="collapsible-header"><i class="material-icons">place</i>SECOND EVENT TITLE</div>
                <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
            </li>
            <li>
                <div class="collapsible-header"><i class="material-icons">whatshot</i>THIRD EVENT TITLE</div>
                <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
            </li>
        </ul>
        <a class="event-create waves-effect waves-light btn-large right">Submit</a>
    </div> -->

    <!-- EVENTS FORM PAGE----------------------------------------------------------------------------------------------------->
    <!-- <div id='container'>
        <h5>Create your event</h5>
        <div class="row">
            <div class="input-field col s12">
                <input class="event-title event-input" placeholder="Event title" type="text">
                <label for="title">Title</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field file-field col l6 m6 s12">
                <div class="btn">
                    <span>Upload</span>
                    <input type="file">
                </div>
                <div class="file-path-wrapper">
                    <input class="event-photo file-path validate" type="text" placeholder="Add a photo!">
                </div>
            </div>
            <div class="input-field col l6 m6 s12">
                <select>
                    <option value=""></option>
                    <option value="1">Birthday</option>
                    <option value="2">Workout</option>
                    <option value="3">Dog park</option>
                    <option value="4">Holiday</option>
                    <option value="5">Training</option>
                    <option value="5">Group Walk</option>
                </select>
                <label>Event type</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input class="event-location validate" placeholder="Who is organizing the event?" type="text">
                <label for="organizer">Location</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col l6 m6 s12">
                <label>Date</label><br>
                <input class="event-date datepicker" type="date">
            </div>
            <div class="input-field col l3 m3 s6">
                <label>Start Time</label><br>
                <input class='event-start' type="time" name="appt" min="09:00" max="18:00" required>
            </div>
            <div class="input-field col l3 m3 s6">
                <label>End Time</label><br>
                <input class='event-end' type="time" name="appt" min="09:00" max="18:00" required>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input class="event-description validate" type="text">
                <label for="organizer">Describe your event</label>
            </div>
        </div>
        </form>
        <a class="event-submit waves-effect waves-light btn-large right">Submit</a>
    </div> -->

    <!-- MAP PAGE------------------------------------------------------------------------------------------------------ -->
    <script id="map-template" type="text/x-handlebars-template">
        function initMap() {
            var userLocation = {
                lat: {{user.lat}},
                lng: {{user.lon}}
            };
            
            var map = new google.maps.Map(document.getElementById('map'), {
                streetViewControl: false,
                rotateControl: false,
                fullscreenControl: false,
                mapTypeControl: false,
                zoomControl: true,
                zoomControlOptions: {
                    position: google.maps.ControlPosition.RIGHT_TOP
                },
                zoom: 16,
                center: userLocation
            })

            var userContentString =
                <div class=" iw-container">
                    <div class="iw-title"><img src="{{dog.image}}" class="map-image" height="80" width="80">
                        <div class="iw-name">{{dog.name}}</div>
                    </div>
                    <div class="iw-content">
                        <div class="iw-subTitle">{{dog.breed}}</div>
                        <p>{{dog.toy}}</p>
                        <p>{{dog.treat}}</p>
                        <button>Profile</button>
                    </div>
                    <div class="iw-bottom-gradient"></div>
                </div>

                var userInfoWindow = new google.maps.InfoWindow({
                    content: userContentString
                });
    
                var userMarker = new google.maps.Marker({
                    position: userLocation,
                    map: map,
                    title: 'Dog 1',
                    icon: "assets/download1.png"
                });
    
                userMarker.addListener('click', function () {
                    userInfoWindow.open(map, userMarker);
                });

            {{#Each otherUser}}
            var {{_id}}Location = {
                lat: {{lat}},
                lng: {{lon}}
            };

            var {{_id}}String =
            <div class=" iw-container">
                <div class="iw-title"><img src="{{dog.image}}" class="map-image" height="80" width="80">
                    <div class="iw-name">{{dog.name}}</div>
                </div>
                <div class="iw-content">
                    <div class="iw-subTitle">{{dog.breed}}</div>
                    <p>{{dog.toy}}</p>
                    <p>{{dog.treat}}</p>
                    <button>Profile</button>
                </div>
                <div class="iw-bottom-gradient"></div>
            </div>

            var {{_id}}InfoWindow = new google.maps.InfoWindow({
                content: {{_id}}String
            });
                
            var {{_id}}Marker = new google.maps.Marker({
                position: {{_id}}Location,
                map: map,
                title: 'Dog 2',
                icon: "assets/download1.png"
            });
            
            {{_id}}Marker.addListener('click', function () {
                otherInfoWindow.open(map, {{_id}}Marker);
            });
            {{/Each}}
        }    
    </script>
    
    <script>
        $(".button-collapse").sideNav()
    </script>
</body>

</html>